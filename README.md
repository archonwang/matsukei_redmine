# Matsukei Redmine plugin

社内で使用しているRedmineの部分的な改修をまとめたプラグインです。

## Features

### ファイルやディレクトリへのリンクの挿入マクロの追加

- 入力したディレクトリ、ファイルパスをファイルプロトコルで開くことができます。
（ブラウザの設定によって開けない場合があります）

e.g. ```{{link(\\svr\documents\picture.png, This is Picture)}}```

### プロジェクト一覧(一般ユーザ向け)の改善

- プロジェクト一覧の表示を管理者用のプロジェクト一覧と同様の表示に変更しました。
- 更新日はプロジェクトに属するチケット、チケットの更新履歴、リポジトリとチケットの関連付け、文書、ニュースのレコードにある最新の日付（event_datetime）を表示しています。
- コピーはログインユーザが、権限「プロジェクトの追加」を持つロールに割り当てられている場合のみ表示されます。
- プロジェクトをコピーすると、ログインユーザを強制的に権限「メンバーの管理」を持つロールに割り当て、メンバーに設定します（Redmine管理者ではない場合のみ）。

### プロジェクト一覧(画面右上のリスト)の改善

- メンバーとして参加しているプロジェクトのみ表示されていたが、非メンバーでもプロジェクト階層に沿って表示するように改善しました。

### チケットに対するデフォルトウォッチャー設定の追加

- プロジェクト毎にチケット作成時の初期ウォッチャーを指定できるようにしました。
- 指定できるユーザーはプロジェクトのメンバーのみです。

### チケットの通知メール先を閲覧画面のサイドバーに表示

- 個人の通知設定からメール送信されるユーザーを確認できるようにしました。

### フォーラムの返答表示順を個人設定に追加

- 個人の表示設定に返答の表示順を追加しました。

## Supported versions

- Redmine 3.3.x

## Install

1. `your_redmine_path/plugins/matsukei_redmine/` に clone もしくはダウンロードしたソースを配置します
2. `$ cd your_redmine_path/`
3. `$ bundle exec rake redmine:plugins:migrate NAME=matsukei_redmine RAILS_ENV=production`
4. Redmineを再起動してください
